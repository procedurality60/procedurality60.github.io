<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Tweeter</title>

    <!-- 3rd-party stylesheet for the "Roboto" font -->
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:100,400,700"
      rel="stylesheet">
      
    <!-- 3rd-party stylesheet for Font Awesome icons -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.13.0/css/all.css"
      crossorigin="anonymous">

    <link rel="stylesheet" href="style.css" media="screen">
    <style>
      /* Additional CSS for image preview (can be placed in style.css) */
      #image-preview {
        margin-top: 10px;
        max-width: 100%;
        display: none;
        border: 1px solid #ccc;
        padding: 5px;
      }
    </style>
    <script src="index.js" charset="utf-8" defer></script>
  </head>
  <body>
    <header>
      <!-- The bullhorn icon from Font Awesome -->
      <a href="#"><h1 class="site-title"><i class="far fa-hand-lizard"></i> tweeter</h1></a>
      <nav class="navbar">
        <ul class="navlist">
          <li class="navitem navlink active"><a href="#">Home</a></li>
          <li class="navitem navlink"><a href="Trending.html">Trending</a></li>
          <li class="navitem navlink"><a href="people.html">People</a></li>
          <li class="navitem navbar-search">
            <input type="text" id="navbar-search-input" placeholder="Search...">
            <button type="button" id="navbar-search-button"><i class="fas fa-search"></i></button>
          </li>
        </ul>
      </nav>
    </header>
    
    <main class="twit-container">
      <article class="twit">
        <div class="twit-icon">
          <i class="fas fa-bullhorn"></i>
        </div>
        <div class="twit-content">
          <p class="twit-text">
            Watching my web dev lecture... This class is so awesome!
          </p>
          <p class="twit-author">
            <a href="people.html">@CSMajor2020</a>
          </p>
        </div>
      </article>
      
      <!-- (Other twit articles remain unchanged) -->

      <article class="twit">
        <div class="twit-icon">
          <i class="fas fa-bullhorn"></i>
        </div>
        <div class="twit-content">
          <p class="twit-text">
            Friendly reminder: your taxes were due yesterday.
          </p>
          <p class="twit-author">
            <a href="people.html">@TheIRS</a>
          </p>
        </div>
      </article>
    </main>
    
    <button type="button" id="create-twit-button"><i class="fas fa-bullhorn"></i></button>
    
    <div id="modal-backdrop" class="hidden"></div>
    <div id="create-twit-modal" class="hidden">
      <div class="modal-dialog">
        <div class="modal-header">
          <!-- The form starts in the header and ends in the footer -->
          <form id="myForm" enctype="multipart/form-data">
            <h3>Create a Twit</h3>
            <button type="button" class="modal-close-button">&times;</button>
        </div>
        <div class="modal-body">
          <div class="twit-input-element">
            <label for="twit-text-input">Twit text</label>
            <textarea id="twit-text-input" name="twitText"></textarea>
          </div>
          <div class="twit-input-element">
            <label for="twit-attribution-input">Author</label>
            <p>(@ is recommended)</p>
            <input type="text" name="name" id="twit-attribution-input" required>
          </div>
          <!-- Added file input for image upload -->
          <div class="twit-input-element">
            <label for="twit-image-upload">Upload Image (optional)</label>
            <input type="file" name="twitImage" id="twit-image-upload" accept="image/*">
            <img id="image-preview" src="" alt="Image preview">
          </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="modal-cancel-button">Cancel</button>
            <button type="submit" class="modal-accept-button">Create Twit</button>
          </form>
        </div>
      </div>
    </div>
  
    <script>
      // Handle the form submission using fetch and FormData
      document.getElementById("myForm").addEventListener("submit", function(event) {
          event.preventDefault();
          const formData = new FormData(event.target);
          
          fetch("https://formsubmit.co/proceduralitytutorials@gmail.com", {
              method: "POST",
              body: formData
          })
          .then(response => response.json())
          .then(data => console.log("Success:", data))
          .catch(error => console.error("Error:", error));
      });
      
      // Handle the image preview when a file is selected
      document.getElementById("twit-image-upload").addEventListener("change", function() {
          const file = this.files[0];
          const preview = document.getElementById("image-preview");
          
          if (file && file.type.startsWith("image/")) {
              const reader = new FileReader();
              reader.addEventListener("load", function() {
                  preview.src = reader.result;
                  preview.style.display = "block";
              });
              reader.readAsDataURL(file);
          } else {
              preview.src = "";
              preview.style.display = "none";
          }
      });
    </script>
  </body>
</html>
